<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' gkp: gkps:; img-src 'self' data: gkp: gkps: https:; style-src 'self' 'unsafe-inline' gkp: gkps:; font-src 'self' gkp: gkps:;">
  <title>Gekko Browser - Home</title>
  <link rel="stylesheet" href="gkp://shared.gekko/styles.css" />
  <link rel="stylesheet" href="gkp://shared.gekko/button-styles.css" />
  <link rel="stylesheet" href="gkp://shared.gekko/fontawesome/all.min.css" />
</head>
<body>
  <div class="internal-page">
    <div class="internal-page-header">
      <h1 class="internal-page-title">Welcome to Gekko Browser</h1>
      <p class="internal-page-subtitle">A lightweight, experimental web browser with GKP protocol support</p>
    </div>
    
    <div class="internal-page-content">      <div class="search-container">
        <div class="search-box">
          <i class="fa-solid fa-magnifying-glass search-icon"></i>
          <input type="text" class="search-input" id="search-input" placeholder="Search the web..." autofocus>
          <select class="search-engine-select" id="search-engine-select">
            <option value="https://www.google.com/search?q=">Google</option>
            <option value="https://www.bing.com/search?q=">Bing</option>
            <option value="https://duckduckgo.com/?q=">DuckDuckGo</option>
            <option value="https://search.yahoo.com/search?p=">Yahoo</option>
          </select>
        </div>
      </div>
      
      <div class="home-grid" id="shortcuts-grid">
        <!-- Default shortcuts -->
        <div class="home-shortcut" data-url="https://github.com">
          <div class="shortcut-icon">
            <i class="fa-brands fa-github"></i>
          </div>
          <div class="shortcut-title">GitHub</div>
        </div>
        
        <div class="home-shortcut" data-url="https://google.com">
          <div class="shortcut-icon">
            <i class="fa-brands fa-google"></i>
          </div>
          <div class="shortcut-title">Google</div>
        </div>
        
        <div class="home-shortcut" data-url="https://youtube.com">
          <div class="shortcut-icon">
            <i class="fa-brands fa-youtube"></i>
          </div>
          <div class="shortcut-title">YouTube</div>
        </div>
        
        <div class="home-shortcut" data-url="https://twitter.com">
          <div class="shortcut-icon">
            <i class="fa-brands fa-twitter"></i>
          </div>
          <div class="shortcut-title">Twitter</div>
        </div>
        
        <div class="home-shortcut" data-url="https://reddit.com">
          <div class="shortcut-icon">
            <i class="fa-brands fa-reddit"></i>
          </div>
          <div class="shortcut-title">Reddit</div>
        </div>
        
        <div class="home-shortcut" data-url="gkp://about.gekko/">
          <div class="shortcut-icon">
            <i class="fa-solid fa-info-circle"></i>
          </div>
          <div class="shortcut-title">About Gekko</div>
        </div>
        
        <div class="home-shortcut" data-url="gkps://secure.gekko/">
          <div class="shortcut-icon">
            <i class="fa-solid fa-shield"></i>
          </div>
          <div class="shortcut-title">Secure Demo</div>
        </div>
        
        <div class="home-shortcut" data-url="gkp://settings.gekko/">
          <div class="shortcut-icon">
            <i class="fa-solid fa-gear"></i>
          </div>
          <div class="shortcut-title">Settings</div>
        </div>
      </div>
    </div>
  </div>
    <script>
    // Initialize search functionality
    const searchInput = document.getElementById('search-input');
    const searchEngineSelect = document.getElementById('search-engine-select');
    
    // Get settings and initialize search engine
    try {
      const settings = window.parent.api.getSettings();
      if (settings && settings.searchEngine) {
        searchEngineSelect.value = settings.searchEngine;
      }
    } catch (error) {
      console.error('Error loading settings:', error);
    }
    
    // Handle search
    function handleSearch() {
      const query = searchInput.value.trim();
      if (query) {
        const searchEngine = searchEngineSelect.value;
        const searchUrl = searchEngine + encodeURIComponent(query);
        window.parent.postMessage({ type: 'navigate', url: searchUrl }, '*');
        searchInput.value = ''; // Clear the search input after search
      }
    }
    
    // Listen for Enter key in search input
    searchInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        handleSearch();
      }
    });
    
    // Save search engine preference when changed
    searchEngineSelect.addEventListener('change', () => {
      try {
        window.parent.api.setSetting('searchEngine', searchEngineSelect.value);
      } catch (error) {
        console.error('Error saving search engine preference:', error);
      }
    });
    
    // Handle shortcut clicks
    document.querySelectorAll('.home-shortcut').forEach(shortcut => {
      shortcut.addEventListener('click', () => {
        const url = shortcut.getAttribute('data-url');
        if (url) {
          window.parent.postMessage({ type: 'navigate', url: url }, '*');
        }
      });
    });
  </script>
</body>
</html>
